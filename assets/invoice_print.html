<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Factura Printable</title><style>body{font-family:Arial;padding:20px} .inv{max-width:800px;margin:0 auto;border:1px solid #ddd;padding:20px} h2{margin-top:0} table{width:100%;border-collapse:collapse} table th, table td{border:1px solid #eee;padding:8px;text-align:left}</style></head><body><div class="inv" id="invoice"></div><script>function getQuery(){ const q = location.search.substring(1).split('&').reduce((o,s)=>{ const [k,v]=s.split('='); if(k) o[k]=decodeURIComponent(v||''); return o; },{}); return q;} function render(){ const q = getQuery(); const invId = q.inv; const data = JSON.parse(localStorage.getItem('rsf_data_v2')||'{}'); const inv = (data.invoices||[]).find(i=>i.id===invId); const out = document.getElementById('invoice'); if(!inv){ out.innerHTML='<p>Factura no encontrada</p>'; return; } let html = `<h2>Factura - ${inv.id}</h2><p><strong>Restaurante:</strong> ${inv.restaurantName}<br/><strong>Fecha:</strong> ${new Date(inv.date).toLocaleString()}</p><table><thead><tr><th>Cant</th><th>Producto</th><th>Precio</th><th>Subtotal</th></tr></thead><tbody>`; inv.items.forEach(it=> html+=`<tr><td>${it.qty}</td><td>${it.name}</td><td>${it.price}</td><td>${it.subtotal}</td></tr>`); html += `</tbody></table><h3>Total: ${inv.total}</h3><p class="small">Gracias por su compra.</p>`; out.innerHTML = html; } render();</script></body></html>
